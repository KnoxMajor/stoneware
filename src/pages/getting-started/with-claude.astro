---
import BaseLayout from '../../layouts/BaseLayout.astro';
const base = import.meta.env.BASE_URL;
---

<BaseLayout title="Use with Claude">
  <h1>Use with Claude</h1>
  <p>Give Claude this link and let it cook</p>

  <div class="copy-url-box" id="copy-url-box">
    <code class="url-text" id="url-text"></code>
    <button class="copy-url-btn" id="copy-url-btn" aria-label="Copy URL">
      <svg class="icon-copy" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
      </svg>
      <svg class="icon-check" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
      </svg>
    </button>
  </div>

  <style>
    .copy-url-box {
      display: inline-flex;
      align-items: center;
      gap: var(--sw-space-3);
      padding: var(--sw-space-3) var(--sw-space-4);
      background: var(--sw-gray-900);
      border-radius: var(--sw-radius-lg);
      cursor: pointer;
      transition: background var(--sw-transition-fast);
    }

    .copy-url-box:hover {
      background: var(--sw-gray-800);
    }

    .url-text {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      font-size: var(--sw-text-md);
      color: var(--sw-gray-100);
      background: none;
      padding: 0;
    }

    .copy-url-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 4px;
      background: transparent;
      border: none;
      border-radius: var(--sw-radius-sm);
      cursor: pointer;
      transition: background var(--sw-transition-fast);
    }

    .copy-url-btn:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .copy-url-btn svg {
      width: 18px;
      height: 18px;
      color: var(--sw-gray-400);
    }

    .copy-url-btn .icon-check {
      display: none;
      color: var(--sw-white);
    }

    .copy-url-box.copied .icon-copy {
      display: none;
    }

    .copy-url-box.copied .icon-check {
      display: block;
    }

    .copy-url-box.copied .url-text {
      color: var(--sw-white);
    }
  </style>

  <script define:vars={{ base }}>
    const box = document.getElementById('copy-url-box');
    const urlText = document.getElementById('url-text');

    const fullUrl = window.location.origin + base + 'claude.md';
    urlText.textContent = fullUrl;

    box.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(fullUrl);
        box.classList.add('copied');

        setTimeout(() => {
          box.classList.remove('copied');
        }, 2000);
      } catch (err) {
        console.error('Failed to copy:', err);
      }
    });
  </script>
</BaseLayout>
